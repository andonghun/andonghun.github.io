<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Algorithm 문제 업로드 자동화 | Tech Blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Tech Blog for donghun">
    
    <link rel="preload" href="/assets/css/0.styles.d4bf95f4.css" as="style"><link rel="preload" href="/assets/js/app.525ee5cb.js" as="script"><link rel="preload" href="/assets/js/2.5cca7000.js" as="script"><link rel="preload" href="/assets/js/28.a37cfd3d.js" as="script"><link rel="prefetch" href="/assets/js/10.24780224.js"><link rel="prefetch" href="/assets/js/11.9295c5d4.js"><link rel="prefetch" href="/assets/js/12.07cbfdae.js"><link rel="prefetch" href="/assets/js/13.c36bb58d.js"><link rel="prefetch" href="/assets/js/14.4afdfbae.js"><link rel="prefetch" href="/assets/js/15.8dd287c7.js"><link rel="prefetch" href="/assets/js/16.8c5d5bb8.js"><link rel="prefetch" href="/assets/js/17.d5df77c3.js"><link rel="prefetch" href="/assets/js/18.97b2be33.js"><link rel="prefetch" href="/assets/js/19.4acd552f.js"><link rel="prefetch" href="/assets/js/20.ac9089f1.js"><link rel="prefetch" href="/assets/js/21.b0503b40.js"><link rel="prefetch" href="/assets/js/22.ed5d4896.js"><link rel="prefetch" href="/assets/js/23.1f78191d.js"><link rel="prefetch" href="/assets/js/24.1a98ea1e.js"><link rel="prefetch" href="/assets/js/25.13b8e028.js"><link rel="prefetch" href="/assets/js/26.0b49a9cf.js"><link rel="prefetch" href="/assets/js/27.f8c2d254.js"><link rel="prefetch" href="/assets/js/29.0f79da6c.js"><link rel="prefetch" href="/assets/js/3.fd2834c1.js"><link rel="prefetch" href="/assets/js/30.5093e5c4.js"><link rel="prefetch" href="/assets/js/31.39a71d1e.js"><link rel="prefetch" href="/assets/js/32.f8619c15.js"><link rel="prefetch" href="/assets/js/33.68b7f04e.js"><link rel="prefetch" href="/assets/js/34.fc0ed323.js"><link rel="prefetch" href="/assets/js/4.b3d7061b.js"><link rel="prefetch" href="/assets/js/5.abedb45c.js"><link rel="prefetch" href="/assets/js/6.73c063ed.js"><link rel="prefetch" href="/assets/js/7.b4e343ac.js"><link rel="prefetch" href="/assets/js/8.d732b2f2.js"><link rel="prefetch" href="/assets/js/9.38b3bc75.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d4bf95f4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Tech Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  docs
</a></div><div class="nav-item"><a href="https://github.com/andonghun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  docs
</a></div><div class="nav-item"><a href="https://github.com/andonghun" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">Blog</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>정보 올림피아드</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>토이 프로젝트</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/toy/blogautomation.html" aria-current="page" class="active sidebar-link">Algorithm 문제 업로드 자동화</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/toy/blogautomation.html#algorithm-문제-업로드-자동화" class="sidebar-link">Algorithm 문제 업로드 자동화</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>wiki</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="algorithm-문제-업로드-자동화"><a href="#algorithm-문제-업로드-자동화" class="header-anchor">#</a> Algorithm 문제 업로드 자동화</h2> <div class="language- extra-class"><pre class="language-text"><code>BeautifulSoup를 이용한 웹 크롤링과 python 파일 입출력을 이용한 자동화
</code></pre></div><h3 id="problem"><a href="#problem" class="header-anchor">#</a> Problem</h3> <p><a href="http://www.jungol.co.kr/" target="_blank" rel="noopener noreferrer">정보 올림피아드<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>의 문제를 종종 풀면서 블로그에 업로드 하는데, 귀찮은 문제가 생겼다.</p> <p>나는 <code>vuepress</code>를 이용하여  문제를 업로드 하는데, 두개의 귀찮은 과정이 필요하다.</p> <ol><li>블로그의 사이드바에 제대로 나타나기 위해서는 <code>config.js</code>파일에 값을 넣어주어야 한다는 것.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>sidebar<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;/algorithm/&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">&quot;정보 올림피아드&quot;</span><span class="token punctuation">,</span>
            collapsable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            children<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token operator">...</span>
                <span class="token string">&quot;jungol/2514&quot;</span><span class="token punctuation">,</span>
                <span class="token operator">...</span>
                <span class="token comment">//flag_algo1</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/framework/&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">&quot;/toy/&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;영화리뷰&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ol start="2"><li>아래 처럼 정올 문제 양식과 입력을 일일히 해야한다는 것</li></ol> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">###</span> number. title</span>

<span class="token url">[<span class="token content">출처</span>](url)</span>

<span class="token title important"><span class="token punctuation">####</span> 문제 </span>
​```
​```

<span class="token title important"><span class="token punctuation">####</span> 입력 형식</span>
​```
​```

<span class="token title important"><span class="token punctuation">####</span> 출력형식</span>
​```
​```

​```python
​```
</code></pre></div><p>너무 귀찮다!</p> <p>어떻게 하면 자동화 할 수 있을까 고민하다가. <code>BeautifulSoup</code>와 python의 <code>파일 입출력</code>을 활용하여 url을 입력하면 자동으로 모든 과정이 구현될 수 있도록 자동화 하였다.</p> <h3 id="solve"><a href="#solve" class="header-anchor">#</a> solve</h3> <ol><li>크롤링</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 1. Crawl Part using bs4</span>
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup
<span class="token keyword">import</span> requests

<span class="token comment"># input the url</span>
url <span class="token operator">=</span> <span class="token string">'http://www.jungol.co.kr/bbs/board.php?bo_table=pbank&amp;wr_id=463&amp;sca=4050'</span>

response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

<span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
html <span class="token operator">=</span> response<span class="token punctuation">.</span>text
soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>

title <span class="token operator">=</span> soup<span class="token punctuation">.</span>select_one<span class="token punctuation">(</span><span class="token string">'#bo_v_title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span>separator<span class="token operator">=</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
problem_text <span class="token operator">=</span> soup<span class="token punctuation">.</span>select_one<span class="token punctuation">(</span><span class="token string">'#bo_v &gt; div:nth-child(4)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span>separator<span class="token operator">=</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
input_text <span class="token operator">=</span> soup<span class="token punctuation">.</span>select_one<span class="token punctuation">(</span><span class="token string">'#bo_v &gt; div:nth-child(7)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span>separator<span class="token operator">=</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
output_text <span class="token operator">=</span> soup<span class="token punctuation">.</span>select_one<span class="token punctuation">(</span><span class="token string">'#bo_v &gt; div:nth-child(10)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_text<span class="token punctuation">(</span>separator<span class="token operator">=</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">else</span> <span class="token punctuation">:</span> 
<span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span>
</code></pre></div><p><code>BeautifulSoup</code>를 이용하여 크롤링한 후, 텍스트를 가져왔다. 이때, 크롬 개발자 도구에서 <code>copy selector</code>를 이용하면 쉽다는 것을 깨달았다.</p> <ol start="2"><li>게시글 생성</li></ol> <div class="language-python extra-class"><pre class="language-python"><code>title_number <span class="token operator">=</span> title<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>

f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'docs/algorithm/jungol/</span><span class="token interpolation"><span class="token punctuation">{</span>title_number<span class="token punctuation">}</span></span><span class="token string">.md'</span></span><span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'''### </span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span><span class="token string">\n\n
[출처](</span><span class="token interpolation"><span class="token punctuation">{</span>url<span class="token punctuation">}</span></span><span class="token string">)\n
#### 문제\n
​```\n
</span><span class="token interpolation"><span class="token punctuation">{</span>problem_text<span class="token punctuation">}</span></span><span class="token string">\n
​```\n
#### 입력형식\n
​```\n
</span><span class="token interpolation"><span class="token punctuation">{</span>input_text<span class="token punctuation">}</span></span><span class="token string">\n
​```\n
#### 출력형식\n
​```\n
</span><span class="token interpolation"><span class="token punctuation">{</span>output_text<span class="token punctuation">}</span></span><span class="token string">\n
​```\n
​```python\n
여기에 파이썬코드를 작성해 주십시오\n
​```\n\n
'''</span></span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>처음에는 파일 생성시 외계문자가 나와 당황했지만,  <code>encoding='utf8'</code>를 추가해서 해결했다. 파일 입출력 함수를 이용해서 원하는 경로에 md 파일을 생성하였다.</p> <ol start="3"><li>config.js 업데이트 (블로그 사이드 바에 추가)</li></ol> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 3. Update config.js</span>
<span class="token keyword">import</span> os

<span class="token comment"># 임시 파일 생성</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;temp.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fout<span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># 코드 중간에 사이드바 추가</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'docs/.vuepress/config.js'</span></span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> line_idx <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">'flag_algo1'</span> <span class="token keyword">in</span> lines<span class="token punctuation">[</span>line_idx<span class="token punctuation">]</span><span class="token punctuation">:</span>
            f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;temp.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'&quot;jungol/</span><span class="token interpolation"><span class="token punctuation">{</span>title_number<span class="token punctuation">}</span></span><span class="token string">&quot;,\n</span><span class="token interpolation"><span class="token punctuation">{</span>lines<span class="token punctuation">[</span>line_idx<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;temp.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>lines<span class="token punctuation">[</span>line_idx<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># config.js 다시 만들기</span>
os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'docs/.vuepress/config.js'</span></span><span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'docs/.vuepress/config.js'</span></span><span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;temp.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> line_idx <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'docs/.vuepress/config.js'</span></span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">)</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>lines<span class="token punctuation">[</span>line_idx<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># temp.js 삭제</span>
os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string">'temp.js'</span><span class="token punctuation">)</span>
</code></pre></div><p>추가가 필요한 코드의 부분에 주석을 추가하여 해당 부분에 글을 추가하였다. 이 때, 임시 파일을 생성하여 덮어쓰고 지우는 방식으로 해결했는데, 더 좋은 방법이 있지 않을까 하는 생각이 든다. 이렇게 하면 파일 용량이 커질 때 느려질 것 같다.</p> <p>이제 편하게 문제 풀면 된다!</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/jungol/1402.html" class="prev">
        1402 : 약수 구하기
      </a></span> <span class="next"><a href="/blog/wiki/fedevelopertip.html">
        개발환경 for FE Developer
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.525ee5cb.js" defer></script><script src="/assets/js/2.5cca7000.js" defer></script><script src="/assets/js/28.a37cfd3d.js" defer></script>
  </body>
</html>
